{% extends "@EasyAdmin/page/content.html.twig" %}
{# @var ea \EasyCorp\Bundle\EasyAdminBundle\Context\AdminContext #}
{# @var action \EasyCorp\Bundle\EasyAdminBundle\Dto\ActionDto #}
{# @var entity \EasyCorp\Bundle\EasyAdminBundle\Dto\EntityDto #}

{% block head_javascript %}
    {{ parent() }}
    {{ encore_entry_script_tags('admin/data-source/analyse') }}
{% endblock head_javascript %}

{% block main %}
<main>

<h1 class="title">Analyse du flux</h1>
<ul>
    <li>Nom : {{ dataSource.name }}</li>
    <li>URL : {{ dataSource.importApiUrl }}</li>
    <li>Nombre d'aide : {{ dataSource.nbAids }}</li>

</ul>


    <div id="treeview-wrapper">
        <div id="treeview">
            {% for aid in aidsFromImport %}
            <div class="branch">
                {# {{ dump(aid)}} #}
                {% for key, value in aid %}
                    {% if value is not iterable %}
                    <div class="leaf">{{ key }} : {{ value }}</div>
                    {% else %}
                        {% for subKey, subValue in value %}
                            <div class="leaf">{{ subKey }} : {{ subValue }}</div>
                        {% endfor %}
                    {% endif %}
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>

</main>
{% endblock %}

{% block body_javascript %}

{% endblock body_javascript %}