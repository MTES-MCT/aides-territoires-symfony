
<div>
    <p>Mod√®le de fichier √† respecter pour l'import de donn√©es d'aides :</p>
    <ul>
        <li><p><a href="{{ asset('build/docs/aid_import_template.xlsx') }}" download="aid_import_template.xlsx" title="Format Xslx" class="btn btn-success"><i class="fa fa-download"></i> Format Xlsx</a></p></li>
        <li><p><a href="{{ asset('build/docs/aid_import_template.csv') }}" download="aid_import_template.csv" title="Format CSV" class="btn btn-success"><i class="fa fa-download"></i> Format CSV</a></p></li>
    </ul>
</div>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Colonne</th>
            <th>Champ</th>
            <th>Description</th>
            <th>Restriction</th>
            <th>Exemple</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>A</td>
            <td>Nom de l'aide</td>
            <td>Le titre doit commencer par un verbe √† l‚Äôinfinitif pour que l‚Äôobjectif de l‚Äôaide soit explicite vis-√†-vis de ses b√©n√©ficiaires.</td>
            <td>
                <ul>
                    <li>Requis</li>
                </ul>
            </td>
            <td>Prime √† la conversion</td>
        </tr>
        <tr>
            <td>B</td>
            <td>Programmes</td>
            <td>Les programmes associ√©s √† cette aide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact du programme
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#programsModal">
                        Liste
                    </button>
                    </li>
                    <li>Plusieurs programmes peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>Action c≈ìur de ville, üá™üá∫AGRIP - Promotion des produits agricoles</td>
        </tr>
        <tr>
            <td>C</td>
            <td>Nom initial</td>
            <td>Comment cette aide s‚Äôintitule-t-elle au sein de votre structure ?</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                </ul>
            </td>
            <td>Prime √† la conversion</td>
        </tr>
        <tr>
            <td>D</td>
            <td>Porteurs</td>
            <td>Les porteurs de cette aide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre l'identifiant du porteur.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#backersModal">
                        Trouver identifiant
                    </button>
                    </li>
                    <li>Plusieurs identifiants porteurs peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>22 (ADEME), 347 (Ademe ‚Äî Direction r√©gionale ‚Äî Provence-Alpes-C√¥te d'Azur)</td>
        </tr>
        <tr>
            <td>E</td>
            <td>Insctructeurs</td>
            <td>Les insctructeurs de cette aide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre l'identifiant de l'instructeur.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#backersModal">
                        Trouver identifiant
                    </button>                    
                    </li>
                    <li>Plusieurs identifiants insctructeurs peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>22 (ADEME), 347 (Ademe ‚Äî Direction r√©gionale ‚Äî Provence-Alpes-C√¥te d'Azur)</td>
        </tr>
        <tr>
            <td>F</td>
            <td>B√©n√©ficiaires de l'aide</td>
            <td>Les cibles de cette aide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact de la cible.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#organizationTypesModal">
                        Liste
                    </button>
                    </li>
                    <li>Plusieurs b√©n√©ficiaires peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>Commune, Intercommunalit√© / Pays</td>
        </tr>
        <tr>
            <td>G</td>
            <td>Types d'aide</td>
            <td>Le type de l‚Äôaide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact du type.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#aidTypesModal">
                        Liste
                    </button>
                    </li>
                    <li>Plusieurs types peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>Subvention, Pr√™t</td>
        </tr>
        <tr>
            <td>H</td>
            <td>Taux de subvention, min. et max. (en %, nombre entier)</td>
            <td>Les taux de subventions, s√©par√©s par des virgules</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Doit √™tre un nombre</li>
                </ul>
            </td>
            <td>10,20</td>
        </tr>
        <tr>
            <td>I</td>
            <td>Taux de subvention commentaire</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>J</td>
            <td>Appel √† projet / Manifestation d'int√©r√™t</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li><strong>oui</strong> ou <strong>non</strong></li>
                </ul>
            </td>
            <td>oui</td>
        </tr>
        <tr>
            <td>K</td>
            <td>Description compl√®te de l'aide et de ses objectifs</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Les sauts de lignes sont convserv√©s</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>L</td>
            <td>Exemples de projets r√©alisables</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Les sauts de lignes sont convserv√©s</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>M</td>
            <td>Th√©matiques de l'aide</td>
            <td>S√©lectionnez la ou les th√©matiques associ√©es √† votre aide. N‚Äôh√©sitez pas √† en choisir plusieurs.</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact de la th√©matique.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#categoriesModal">
                        Liste
                    </button>
                    </li>
                    <li>Plusieurs th√©matiques peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>Equipement public, Eau potable</td>
        </tr>
        <tr>
            <td>N</td>
            <td>R√©currence</td>
            <td>L‚Äôaide est-elle ponctuelle, permanente, ou r√©currente</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact de la r√©currence.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#recurrencesModal">
                        Liste
                    </button>
                    </li>
                </ul>
            </td>
            <td>Permanente</td>
        </tr>
        <tr>
            <td>O</td>
            <td>Date d'ouverture</td>
            <td>√Ä quelle date l‚Äôaide est-elle ouverte aux candidatures ?</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Doit respect√© le format dd/mm/YYYY</li>
                </ul>
            </td>
            <td>04/07/2024</td>
        </tr>
        <tr>
            <td>P</td>
            <td>Date de pr√©-d√©p√¥t</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Doit respect√© le format dd/mm/YYYY</li>
                </ul>
            </td>
            <td>04/07/2024</td>
        </tr>
        <tr>
            <td>Q</td>
            <td>Date de cl√¥ture</td>
            <td>Quelle est la date de cl√¥ture de d√©p√¥t des dossiers ?</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Doit respect√© le format dd/mm/YYYY</li>
                </ul>
            </td>
            <td>04/07/2024</td>
        </tr>
        <tr>
            <td>R</td>
            <td>√âligibilit√©</td>
            <td>Conditions d‚Äô√©ligibilit√©</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Les sauts de lignes sont convserv√©s</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>S</td>
            <td>√âtat d'avancement du projet pour b√©n√©ficier du dispositif</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact de l'√©tat d'avancement.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#stepsModal">
                        Liste
                    </button>
                    </li>
                    <li>Plusieurs √©tats peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>R√©flexion / conception, Mise en ≈ìuvre / r√©alisation, Usage / valorisation</td>
        </tr>
        <tr>
            <td>T</td>
            <td>Types de d√©penses / actions couvertes</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact du type / de l'action.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#destinationsModal">
                        Liste
                    </button>                    
                    </li>
                    <li>Plusieurs types / actions peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>D√©penses de fonctionnement, D√©penses d‚Äôinvestissement</td>
        </tr>
        <tr>
            <td>U</td>
            <td>P√©rim√®tre</td>
            <td>La zone g√©ographique sur laquelle l'aide est disponible.</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre l'identifiant du p√©rim√®tre.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#perimetersModal">
                        Trouver l'identifiant
                    </button>  
                    </li>
                </ul>
            </td>
            <td>71016 (Landes)</td>
        </tr>
        <tr>
            <td>V</td>
            <td>URL d'origine</td>
            <td>Lien vers plus d‚Äôinformation (url d‚Äôorigine, site du porteur d‚Äôaides)</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Attention √† bien mettre https://.....</li>
                </ul>
            </td>
            <td>https://aides-territoires.beta.gouv.fr/</td>
        </tr>
        <tr>
            <td>W</td>
            <td>Lien vers une d√©marche en ligne</td>
            <td>Lien vers une d√©marche en ligne pour candidater</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Attention √† bien mettre https://.....</li>
                </ul>
            </td>
            <td>https://aides-territoires.beta.gouv.fr/</td>
        </tr>
        <tr>
            <td>X</td>
            <td>Contact</td>
            <td>Contact pour candidater</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Les sauts de lignes sont convserv√©s</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>Y</td>
            <td>Auteur</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Email de l'auteur, doit √™tre membre d'Aides-Territoires</li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>Z</td>
            <td>Url d'origine de la donn√©e import√©e</td>
            <td></td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>Attention √† bien mettre https://.....</li>
                </ul>
            </td>
            <td>https://aides-territoires.beta.gouv.fr/</td>
        </tr>
        <tr>
            <td>AA</td>
            <td>Identifiant structure</td>
            <td>L'identifiant de la structure pour laquelle vous publiez cette aide</td>
            <td>
                <ul>
                    <li>Requis</li>
                    <li>
                    Doit √™tre un nombre
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#organizationIdsModal">
                        Vos identifiants
                    </button>   
                    </li>
                </ul>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>AB</td>
            <td>Projets r√©f√©rents</td>
            <td>Les projets r√©f√©rents li√©s √† votre aide</td>
            <td>
                <ul>
                    <li>Optionnel</li>
                    <li>
                    Doit √™tre le nom exact du projet r√©f√©rent.
                    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#projectReferencesModal">
                        Liste
                    </button>                        
                    </li>
                    <li>Plusieurs projets r√©f√©rents peuvent √™tre s√©par√©s par des virgules</li>
                </ul>
            </td>
            <td>Acquisition de v√©hicule d√©carbon√©, Construction d‚Äôune √©cole</td>
        </tr>
    </tbody>
</table>

{% set manualData = getImportAidManualDatas() %}

<!-- Modal Programs -->
<div class="modal fade" id="programsModal" tabindex="-1" aria-labelledby="programsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="programsModalLabel">Liste des programmes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for program in manualData.programs %}
                    <p>{{ program }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal Programs -->

<!-- Modal Backers -->
<div class="modal fade" id="backersModal" tabindex="-1" aria-labelledby="backersModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="backersModalLabel">Porteurs et insctructeurs</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><input type="text" name="backer" id="backerSearch" class="form-control" placeholder="Rechercher un porteur ou instructeur"></p>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nom</th>
                            <th>P√©rim√®tre</th>
                        </tr>
                    </thead>
                    <tbody id="backerList">

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal Backers -->


<!-- Modal OrganizationTypes -->
<div class="modal fade" id="organizationTypesModal" tabindex="-1" aria-labelledby="organizationTypesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="organizationTypesModalLabel">Liste des types de structure</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for organizationType in manualData.organizationTypes %}
                    <p>{{ organizationType }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal OrganizationTypes -->

<!-- Modal AidTypes -->
<div class="modal fade" id="aidTypesModal" tabindex="-1" aria-labelledby="aidTypesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="aidTypesModalLabel">Liste des types d'aides</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for aidType in manualData.aidTypes %}
                    <p>{{ aidType }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal AidTypes -->

<!-- Modal Categories -->
<div class="modal fade" id="categoriesModal" tabindex="-1" aria-labelledby="categoriesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="categoriesModalLabel">Liste des th√©matiques</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for category in manualData.categories %}
                    <p>{{ category }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal Categories -->

<!-- Modal AidRecurrence -->
<div class="modal fade" id="recurrencesModal" tabindex="-1" aria-labelledby="recurrencesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="recurrencesModalLabel">Liste des r√©currences</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for aidRecurrence in manualData.aidRecurrences %}
                    <p>{{ aidRecurrence }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal AidRecurrence -->

<!-- Modal AidStep -->
<div class="modal fade" id="stepsModal" tabindex="-1" aria-labelledby="stepsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="stepsModalLabel">Liste des √©tapes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for aidStep in manualData.aidSteps %}
                    <p>{{ aidStep }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal AidStep -->

<!-- Modal AidDestination -->
<div class="modal fade" id="destinationsModal" tabindex="-1" aria-labelledby="destinationsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="destinationsModalLabel">Liste des types de d√©penses / actions couvertes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for aidDestination in manualData.aidDestinations %}
                    <p>{{ aidDestination }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal AidDestination -->

<!-- Modal Perimeter -->
<div class="modal fade" id="perimetersModal" tabindex="-1" aria-labelledby="perimetersModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="perimetersModalLabel">Liste des p√©rim√®tres</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><input type="text" name="perimeter" id="perimeterSearch" class="form-control" placeholder="Rechercher un p√©rim√®tre"></p>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nom</th>
                            <th>Echelle</th>
                            <th>Code Postal</th>
                        </tr>
                    </thead>
                    <tbody id="perimeterList">

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal Perimeter -->


<!-- Modal OrganizationIds -->
<div class="modal fade" id="organizationIdsModal" tabindex="-1" aria-labelledby="organizationIdsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="organizationIdsModalLabel">Identifiants de vos structures</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% if app.user %}
                        {% for organization in app.user.organizations %}
                        <p>{{ organization.name }} : <strong>{{ organization.id }}</strong></p>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal OrganizationIds -->

<!-- Modal ProjectReference -->
<div class="modal fade" id="projectReferencesModal" tabindex="-1" aria-labelledby="projectReferencesModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="projectReferencesModalLabel">Liste des projets r√©f√©rents</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="column-text">
                    {% for projectReference in manualData.projectReferences %}
                    <p>{{ projectReference }}</p>
                    {% endfor %}
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
<!-- /Modal ProjectReference -->